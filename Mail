Subject: Request to Review Consolidated List of APIs Across Non-Prod Environments

Dear Team,

We have consolidated the list of APIs currently available across all non-production environments. Please review the attached sheet and let us know if any APIs are missing. This information is essential for us to proceed with creating the required pipelines.

Kindly note that all APIs available in UAT are also present in SIT. However, in Pre-Prod, most APIs do not yet have pipelines. We request your support in reviewing the list and providing updates wherever necessary.

Special thanks to Pooja for consolidating this sheet.

Your timely inputs will help us ensure accurate pipeline setup.




You can get total CPU cores and total memory (in GB) of all Kubernetes nodes with a single kubectl command.

Below are the simplest and most accurate methods.

â¸»

âœ… 1. Get Total CPU Cores of All Nodes

kubectl get nodes -o jsonpath="{range .items[*]}{.status.capacity.cpu}{'\n'}{end}" \
| awk '{sum += $1} END {print "Total CPU Cores =", sum}'


â¸»

âœ… 2. Get Total Memory of All Nodes (in GB)

Kubernetes reports memory in Ki (kibibytes).

kubectl get nodes -o jsonpath="{range .items[*]}{.status.capacity.memory}{'\n'}{end}" \
| awk '{sum += $1} END {printf "Total Memory = %.2f GB\n", sum/1048576}'


â¸»

ðŸŸ¦ Combined Script: Total CPU + Total Memory (GB)

#!/bin/bash

cpu_total=$(kubectl get nodes -o jsonpath="{range .items[*]}{.status.capacity.cpu}{'\n'}{end}" \
    | awk '{sum += $1} END {print sum}')

mem_total=$(kubectl get nodes -o jsonpath="{range .items[*]}{.status.capacity.memory}{'\n'}{end}" \
    | awk '{sum += $1} END {printf "%.2f", sum/1048576}')

echo "Total CPU Cores : $cpu_total"
echo "Total Memory (GB): $mem_total"


â¸»

ðŸ”¥ One-Liner to Get Total CPU + Memory in Table Format

printf "%-15s %-15s\n" "Total CPU Cores" "Total Memory (GB)"; \
echo -n "$(kubectl get nodes -o jsonpath='{range .items[*]}{.status.capacity.cpu}{"\n"}{end}' | awk '{sum+=$1} END{print sum}')" ; \
echo -ne "\t\t"; \
kubectl get nodes -o jsonpath='{range .items[*]}{.status.capacity.memory}{"\n"}{end}' | awk '{sum+=$1} END{printf "%.2f GB\n", sum/1048576}'


â¸»

ðŸŽ¯ Example Output

Total CPU Cores   48
Total Memory (GB) 192.00 GB


â¸»

If you want, I can also give a script to show per-node CPU, Memory, and Disk in a clean table format.



Here are the **best commands to get CPU cores and Memory (in GB) separately for each Kubernetes node.

â¸»

âœ… 1. CPU & Memory per Node (Clean Table Format)

Command

kubectl get nodes -o jsonpath="{range .items[*]}{.metadata.name}{','}{.status.capacity.cpu}{','}{.status.capacity.memory}{'\n'}{end}" \
| awk -F',' '{
    mem_gb = $3 / 1048576
    printf "%-25s CPU: %-6s Memory: %.2f GB\n", $1, $2, mem_gb
}'


â¸»

ðŸ“Œ Example Output

node1.example.com        CPU: 8      Memory: 31.26 GB
node2.example.com        CPU: 8      Memory: 31.26 GB
node3.example.com        CPU: 16     Memory: 62.51 GB


â¸»

âœ… 2. Only CPU per Node

kubectl get nodes -o jsonpath="{range .items[*]}{.metadata.name}{': '}{.status.capacity.cpu}{'\n'}{end}"


â¸»

âœ… 3. Only Memory per Node (GB Conversion Included)

kubectl get nodes -o jsonpath="{range .items[*]}{.metadata.name}{' '}{.status.capacity.memory}{'\n'}{end}" \
| awk '{printf "%s Memory: %.2f GB\n", $1, $2/1048576}'


â¸»

ðŸ”¥ 4. Best & Simplest Output for Each Node

for node in $(kubectl get nodes -o name | cut -d'/' -f2); do
  cpu=$(kubectl get node $node -o jsonpath="{.status.capacity.cpu}")
  mem=$(kubectl get node $node -o jsonpath="{.status.capacity.memory}")
  mem_gb=$(awk "BEGIN {printf \"%.2f\", $mem/1048576}")
  echo "$node --> CPU: $cpu cores | Memory: $mem_gb GB"
done


â¸»

ðŸŸ¦ Example Output

node1 --> CPU: 8 cores | Memory: 31.26 GB
node2 --> CPU: 8 cores | Memory: 31.26 GB
node3 --> CPU: 16 cores | Memory: 62.51 GB


â¸»

If you want, I can also include disk space (df -h) for each node using a DaemonSet so you donâ€™t need to SSH individually. Just tell me!
